id: "FW-038"
title: "Define minimal CLAUDE.md bootstrap spec"
status: COMPLETED
created: "2026-01-22T12:23:46Z"
updated: "2026-01-24T10:15:00Z"
completed: "2026-01-24T10:15:00Z"
type: CAPABILITY
priority: HIGH
description: |
  Determine what belongs in CLAUDE.md (always loaded) vs plugin (when present). Draft minimal bootstrap: project identity, framework signal, plugin pointer, collaboration mode, escalation triggers, key conventions.
objective: "Clean separation between essential bootstrap and operational detail"
rationale: |
  Current CLAUDE.md has significant content that may duplicate plugin; need clear layering
blocked_by:
  - "FW-008"
blocks: []
notes: |
  Created 22 January 2026.

  23 January 2026: Added dependency on FW-008 (SDLC Project Orchestrator Research).

  23 January 2026: FW-008 completed. Key decisions informing this task:
  - DEC-20260123-181128: Two modes (Evolution/Revolution), each with own plugin
  - DEC-20260123-181348: Revolution "turbo charges" Evolution (same goals)
  - DEC-20260123-182358: Lightweight inline orchestrator agent in plugin
    → CLAUDE.md should be minimal bootstrap only
    → Orchestration logic lives in plugin, not CLAUDE.md

  Now READY to proceed.

  24 January 2026: COMPLETED

  Analysis:
  - Current CLAUDE.md was 386 lines, duplicating plugin content
  - Claude Code docs confirm CLAUDE.md is advisory, hooks are deterministic
  - Skills load on-demand; hooks inject at session/prompt time

  Design decisions (DEC-20260124-101228):
  - CLAUDE.md reduced to 55 lines: identity, conventions, escalation, pointer
  - Created "guided" hook variants that inject operating instructions
  - SessionStart hook: injects 4-point operating instructions + task status
  - UserPromptSubmit hook: provides directive instructions, not just signal tags

  Artifacts created:
  - .claude/CLAUDE.md (minimal, 55 lines)
  - .claude/CLAUDE.md.full-backup (preserved original)
  - hooks/scripts/session-start-guided.sh
  - hooks/scripts/user-prompt-submit-guided.sh
  - tests/hook-effectiveness-test.md (test methodology)
  - tests/scripts/switch-hooks.sh (A/B switching)
  - tests/scripts/test-hook-output.sh (quick tests)
  - tests/scripts/run-test-suite.sh (batch tests)

  Separation principle:
  | Layer | Content |
  |-------|---------|
  | CLAUDE.md | Identity, conventions, escalation, framework pointer |
  | Hooks | Operating instructions (deterministic injection) |
  | Plugin | Full guidance, skills, agents, phase rules |

  Gap identified: Implicit decision detection (user says "yes" to proposal)
  requires conversational state tracking - deferred to future work.
